@model LaundryShopSystem.Models.Order
@{
    ViewBag.Title = "Order Details";
}
<div class="card card-strong p-4">
    <h4 class="accent">Order #@Model.OrderId</h4>
    <div class="row">
        <div class="col-md-6">
            <p><strong>Customer:</strong> @(Model.Customer != null ? Model.Customer.FullName : Model.CustomerId.ToString())</p>
            <p><strong>Phone:</strong> @(Model.Customer != null ? Model.Customer.Phone : "N/A")</p>
            <p><strong>Service Mode:</strong> @Model.ServiceMode</p>
            <p><strong>Status:</strong> @Model.Status</p>
        </div>
        <div class="col-md-6 text-end">
            <p><strong>Total:</strong> ₱@Model.TotalAmount</p>
            <p><strong>Dropoff:</strong> @Model.DropoffAt.ToString("yyyy-MM-dd HH:mm")</p>
            <p><strong>Ready At:</strong> @(Model.ReadyAt?.ToString("yyyy-MM-dd HH:mm") ?? "-")</p>
            @if (!string.IsNullOrEmpty(Model.QRCode))
            {
                <p><strong>Receipt QR</strong></p>
                <img src="@Url.Content(Model.QRCode)" alt="QR" style="width:140px; height:140px;" />
            }
        </div>
    </div>

    <hr />
    <h5>Items</h5>
    <table class="table">
        <thead><tr><th>Item</th><th>Care</th><th>Qty</th><th>Unit</th><th>Service</th><th>Price</th><th>Subtotal</th></tr></thead>
        <tbody>
            @if (Model.OrderItems != null)
            {
                foreach (var it in Model.OrderItems)
                {
                    <tr>
                        <td>@it.ItemType</td>
                        <td>@it.FabricOrCareNotes</td>
                        <td>@it.Quantity</td>
                        <td>@it.UnitType</td>
                        <td>@it.ServiceType</td>
                        <td>₱@it.PricePerUnit</td>
                        <td>₱@it.Subtotal</td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <div class="d-flex justify-content-between mt-3">
        <a class="btn btn-outline-secondary" href="/Orders/Index">Back</a>
        <div>
            <a class="btn btn-warning" href="/Orders/UpdateStatus?id=@Model.OrderId&status=Queued">Queue</a>
            <a class="btn btn-info" href="/Orders/UpdateStatus?id=@Model.OrderId&status=Washing">Washing</a>
            <a class="btn btn-secondary" href="/Orders/UpdateStatus?id=@Model.OrderId&status=Drying">Drying</a>
            <a class="btn btn-success" href="/Orders/UpdateStatus?id=@Model.OrderId&status=ReadyForPickup">Ready</a>
        </div>
    </div>
</div>
